
<!--<p id="notice"><%= notice %></p>-->
<div> <%= @course.name%> </div>

<h3 class = "text-center">COURSE INFO </h3>
<h3 class = "text-center">Course internal id: <%= @course.id%> </h3>
<h3 class = "text-center">Course name : <%= @course.name %></h3>

<div>
    <div style="float:left;">
    <td><%= link_to 'Add to My Course', new_course_path(@course.id), :class => 'btn btn-default' , :style => "color:white" %></td>

    </div>
    <div style="float:left;">
      <%#= button_to "Create Group", {action: "new", controller: "groups", id: @course.id, remote: true}, {class: 'btn btn-default'} %>
      <%= link_to 'Create Group', '#groupEntryModal', class: 'btn btn-default', 'data-toggle' => 'modal' %>
    </div>
    <div style="float:left;">
      <%= button_to "Create Meeting", {action: "new", controller: "meetings", id: @course.id, remote: true}, {class: 'btn btn-default'} %>
    </div>
    <div style="clear:both;">
    </div>
</div>


<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#home">Groups</a></li>
  <li><a data-toggle="tab" href="#menu1">Meetings</a></li>
  <li><a data-toggle="tab" href="#menu2">Members</a></li>
</ul>

<div class="tab-content">
<div id="home" class="tab-pane fade in active">
    <br>
    <h4>There are <%= @groups.length %> groups for this course!</h4>
    <h4>Groups</h4>
    <% if @groups.length == 0 %>
      <tr> You are not in any groups :(</tr>
    <% end %>
    <div class="panel-group" id="accordion">
      <% if @groups.length != 0 %> 
        
        <% @groups.each do |group| %>

          <% if group[1]["joined"] == "true" %> 
            
            <div class="panel panel-success">
              <div class="panel-heading" >
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href= "#mygroup<%= group[1]["id"] %>"> <%= group[1]["name"] %>  </a>
                </h4>
              </div>
          <% else %>

            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href= "#mygroup<%= group[1]["id"] %>"> <%= group[1]["name"] %>  </a>
                </h4>
              </div>
          <%end%>

            <div id= "mygroup<%= group[1]["id"] %>" class="panel-collapse collapse"">
              <div class="panel-body">
                <table class="table table-hover">
                  <thead>
                      <tr>
                          <th>Group Creator</th>
                          <th>Group ID</th>
                      </tr>
                  </thead>
                  <tbody>
                    <tr>
                        <td><%= group[1]["creator_firstname"] %> <%= group[1]["creator_lastname"] %></td>
                        <td> <%= group[1]["id"] %> </td>

                        <% if group[1]["joined"] == "true" %> 
                          <td><%= buttonk_to 'Remove from me from group', group_path(group[0]),
                            data: {:confirm => 'Are you sure?'}, :method => :delete %></td>
                        <% else %>
                          <td><%= button_to 'Show Details', group_path(group[0]) %></td>
                        <%end%>
                        
                        <td>
                          <div class="pre-scrollable"> 
                          <% group[1]["members"].each do |mem|%>
                            <h5><%= "John" + mem.to_s + " Smith" + mem.to_s %></h5>
                          <% end %>
                          </div>
                        </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>         
        
        <% end %>

      <% end %>
    </div>
  </div>
<div id="menu1" class="tab-pane fade">
    
<h3>Meetings</h3>
<h4>Meetings you are currecntly a part of <%= @mymeetings.length %>!</h4>
<table>
  <thead>
    <tr>
      <th colspan="8"></th>
    </tr>
  </thead>

  <tbody>
    <% if @mymeetings.length == 0 %>
      <tr> TABLE IS EMPTY  </tr>
    <% end %>

    <% @mymeetings.each do |meeting| %>

      <tr>
      <td><%= meeting[1]["name"] %> </td>
       <td><%= meeting[1]["location"] %> </td>
        <td><%= meeting[1]["description"] %> </td>
        <td><%= meeting[1]["start_date"] %> </td>
        <td><%= meeting[1]["start_time"] %> </td>
        <td><%= meeting[1]["duraion"] %> </td>
        <td><%= link_to 'Show', meeting_path(meeting[0]) %></td>
        <td><%= link_to 'Remove from me from meeting', meeting_path(meeting[0]),
            data: {:confirm => 'Are you sure?'}, :method => :delete %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<h4>There are <%= @meetings.length %> meetings for this course!</h4>
<table>
  <thead>
    <tr>
      <th colspan="8"></th>
    </tr>
  </thead>
    <% if @meetings.length == 0 %>
      <tr> TABLE IS EMPTY  </tr>
    <% end %>
  <tbody>
    <% @meetings.each do |meeting| %>
      <tr>
      <td><%= meeting[1]["name"] %> </td>
       <td><%= meeting[1]["location"] %> </td>
        <td><%= meeting[1]["description"] %> </td>
        <td><%= meeting[1]["start_date"] %> </td>
        <td><%= meeting[1]["start_time"] %> </td>
        <td><%= meeting[1]["duraion"] %> </td>
        <td><%= link_to 'Show', meeting_path(meeting[0]) %></td>
        <td><%= link_to 'Add to My Course', new_meeting_path(meeting[0]) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

  </div>
<div id="menu2" class="tab-pane fade">
    <h3>Members</h3>
    <p> more memeber data to be populated </p>
      <table>
        <thead>
          <tr>
            <th colspan="2"></th>
          </tr>
        </thead>

        <tbody>
<!--          @members.each do |member| %> -->
          <tr>
<!--           <td><= member %> </td>
          <td>< member["id"] %> </td> -->
          </tr>
<!--          end %> -->
      </tbody>
  </div>  
</div>

<!--=================== Group =======================--> 
<article class='group-info group'>
  
  <!-- Add New group Modal -->
  <div class="modal entry-modal fade" id="groupEntryModal" tabindex="-1" role="dialog" aria-labelledby="intakeEntryModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel">Create New Group</h4>
        </div>
        <div class="modal-body">
            <%= render 'groupform_modal', modal: true%>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default entry-cancelbtn" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- End Modal -->






<%= link_to 'Back', courses_path %>

<script type="text/javascript">

  $(".tab").on('click', function(e){
    
    e.preventDefault()
    
    $(".active").removeClass("active")
    
    $(this).addClass("active")
    
    $(".inner-formdiv").hide()
    
    console.log("#" + $(this).attr("target"))
    
    $("#" + $(this).attr("target")).show()
  })

</script>